<section id="sqliteoverview" role="wrapper">
	<title>SQLite architecture</title>
	<section id="sqliteoverview_packages">
		<title>Packages</title>
		<para>
			The
			<code>android.database</code>
			package
			contains all necessary classes for working with databases.
			The
			<code>android.database.sqlite</code>
			package
			contains the SQLite specific classes.
		</para>
	</section>

	<section id="sqliteoverview_sqliteopenhelper">
		<title>Creating and updating database with SQLiteOpenHelper</title>
		<para>
			To create and upgrade a database in your Android application you
			create a
			subclass of the
			<code>SQLiteOpenHelper</code>
			class.
			In the constructor of your subclass you
			call the
			<code>super()</code>
			method of
			<code>SQLiteOpenHelper</code>
			,
			specifying the database name and the current database version.
		</para>
		<para>
			In this class you need to
			override the following methods to create and
			update your database.

			<itemizedlist>
				<listitem>
					<para>
						<code>onCreate()</code>
						-
						is called by the framework, if the database is accessed but not
						yet created.
					</para>
				</listitem>
				<listitem>
					<para>
						<code>onUpgrade()</code>
						-
						called, if the database version is increased in your application
						code.
						This method allows you to update an existing
						database
						schema or
						to drop the existing database and recreate it via the
						<code>onCreate()</code>
						method.
					</para>
				</listitem>

			</itemizedlist>

		</para>
		<para>
			Both methods receive an
			<code>SQLiteDatabase</code>
			object as parameter which is the Java representation of the
			database.
		</para>

		<para>
			The
			<code>SQLiteOpenHelper</code>
			class
			provides the
			<code>getReadableDatabase()</code>
			and
			<code>getWriteableDatabase()</code>
			methods
			to get access to an
			<code>SQLiteDatabase</code>
			object; either in read
			or
			write mode.
		</para>
		<para>
			The database tables should use the
			identifier
			<code>_id</code>
			for the primary key of the table.
			Several Android functions rely on
			this standard.
		</para>
		<tip>

			<para>
				It is good practice to create a separate class per table. This class
				defines
				static
				<code>onCreate()</code>
				and
				<code>onUpgrade()</code>
				methods. These methods are called in the corresponding methods
				of
				<code>SQLiteOpenHelper</code>
				. This way your implementation of
				<code>SQLiteOpenHelper</code>
				stays readable, even if you have several tables.
			</para>
		</tip>
	</section>



	<section id="sqliteoverview_sqlitedatabase">
		<title>SQLiteDatabase</title>
		<para>
			<code>SQLiteDatabase</code>
			is the base class for working with a
			SQLite
			database in Android and
			provides methods to open, query, update and
			close the database.
		</para>
		<para>
			More specifically
			<code>SQLiteDatabase</code>
			provides the

			<code>insert()</code>
			,
			<code>update()</code>
			and
			<code>delete()</code>
			methods.
		</para>
		<para>
			In addition it provides the
			<code>execSQL()</code>
			method, which allows to
			execute an SQL statement directly.
		</para>
		<para>
			The object
			<code>ContentValues</code>
			allows to define key/values. The
			<parameter>key</parameter>
			represents the table column
			identifier
			and the
			<parameter>value</parameter>
			represents the
			content for the table
			record
			in this column.
			<code>ContentValues</code>
			can be used for inserts and
			updates of database entries.
		</para>
		<para>
			Queries can be created via the
			<code>rawQuery()</code>
			and
			<code>query()</code>
			methods
			or via the
			<code>SQLiteQueryBuilder</code>
			class
			.
		</para>
		<para>
			<code>rawQuery()</code>
			directly
			accepts an SQL select statement as input.
		</para>
		<para>
			<code>query()</code>
			provides a structured interface for specifying
			the SQL query.
		</para>
		<para>
			<code>SQLiteQueryBuilder</code>
			is a convenience class that helps to build SQL queries.
		</para>

	</section>
	<section id="sqliteoverview_rawquery">
		<title>rawQuery() Example</title>

		<para>
			The following gives an example of a
			<code>rawQuery()</code>
			call.
		</para>
		<para>
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/intro/rawquery.txt" />
			</programlisting>
		</para>
	</section>
	<section id="sqliteoverview_query">
		<title>query() Example</title>
		<para>
			The following gives an example of a
			<code>query()</code>
			call.
		</para>
		<para>
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/intro/query.txt" />
			</programlisting>
		</para>
		<para>
			The method
			<code>query()</code>
			has the following parameters.


			<table frame='all'>
				<title>Parameters of the query() method</title>
				<tgroup cols='2' align='left' colsep='1' rowsep='1'>
					<colspec colname='c1' colwidth="1*" />
					<colspec colname='c2' colwidth="3*" />
					<thead>
						<row>
							<entry>Parameter</entry>
							<entry>Comment</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>String dbName</entry>
							<entry>The table name to compile the query against.</entry>
						</row>
						<row>
							<entry>String[] columnNames</entry>
							<entry>A list of which table columns to return. Passing "null"
								will return all columns.
							</entry>
						</row>
						<row>
							<entry>String whereClause</entry>
							<entry>Where-clause, i.e. filter for the selection of data, null
								will select all data.
							</entry>
						</row>
						<row>
							<entry>String[] selectionArgs</entry>
							<entry>You may include ?s in the "whereClause"". These
								placeholders will get
								replaced by the values from the
								selectionArgs array.
							</entry>
						</row>
						<row>
							<entry>String[] groupBy</entry>
							<entry>A filter declaring how to group rows, null will cause the
								rows to not be grouped.
							</entry>
						</row>
						<row>
							<entry>String[] having</entry>
							<entry>Filter for the groups, null means no filter.
							</entry>
						</row>
						<row>
							<entry>String[] orderBy</entry>
							<entry>Table columns which will be used to order the data, null
								means no
								ordering.
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>

		</para>
		<para>
			If a condition is not required you can pass
			<code>null</code>
			, e.g. for the group by
			clause.
		</para>
		<para>
			The
			"whereClause"
			is specified without the word
			"where", for
			example a "where" statement might look like:
			"_id=19 and summary=?".
		</para>
		<para>
			If you specify placeholder values in the where clause via
			<code>?</code>
			,
			you pass
			them as the
			selectionArgs parameter to the query.
		</para>


	</section>



	<section id="sqliteoverview_cursor">
		<title>Cursor</title>
		<para>
			A
			query
			returns a
			<code>Cursor</code>
			object. A Cursor represents the result of a query and basically
			points
			to one row of the query result. This way Android can buffer the
			query results efficiently; as it does not have to load all data into
			memory.
		</para>

		<para>
			To get the number of
			elements of the resulting query use the
			<code>getCount()</code>
			method.
		</para>

		<para>
			To move between individual data
			rows, you can use the
			<code>moveToFirst()</code>
			and
			<code>moveToNext()</code>
			methods. The

			<code>isAfterLast()</code>
			method allows to check if the end of the query result has been
			reached.
		</para>
		<para>

			<code>Cursor</code>
			provides typed
			<code>get*()</code>
			methods, e.g.
			<code>getLong(columnIndex)</code>
			,
			<code>getString(columnIndex)</code>
			to access the column data for the current position of the result.
			The
			"columnIndex" is the number of the column you are
			accessing.
		</para>
		<para>
			<code>Cursor</code>
			also provides the
			<code>getColumnIndexOrThrow(String)</code>
			method which allows to get the column index for a column name of the
			table.
		</para>
		<para>
			A
			<code>Cursor</code>
			needs to be closed with the
			<code>close()</code>
			method call.
		</para>

	</section>

	<section id="sqliteoverview_listviews">
		<title>ListViews, ListActivities and SimpleCursorAdapter</title>
		<para>
			<code>ListViews</code>
			are
			<code>Views</code>
			which allow to display a list of elements.
		</para>
		<para>
			<code>ListActivities</code>
			are specialized
			<wordasword>activities</wordasword>
			which make the usage of
			<code>ListViews</code>
			easier.
		</para>
		<para>
			To work with databases and
			<code>ListViews</code>
			you can use the
			<code>SimpleCursorAdapter</code>
			. The
			<code>SimpleCursorAdapter</code>
			allows to set a layout for each row of the
			<code>ListViews</code>
			.
		</para>
		<para>
			You also define an array which contains the column names and another
			array which contains the IDs of
			<code>Views</code>
			which should be filled with the data.
		</para>
		<para>
			The
			<code>SimpleCursorAdapter</code>
			class will map the columns to the
			<code>Views</code>
			based on the
			<code>Cursor</code>
			passed to it.
		</para>
		<para>
			To obtain the
			<code>Cursor</code>
			you should use the
			<code>Loader</code>
			class.
		</para>

	</section>


</section>
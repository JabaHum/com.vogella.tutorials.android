<section id="simpleappwidget" role="wrapper">
	<title>Exercise: widget with fixed update interval
	<section id="simplewidget1">
		<title>Target
		
			In the following tutorial you create a widget which displays a random
			number. This random number is
			updated every 30
			minutes.
			You also
			register an
			`OnClickListener`
			so that the widgets updates once the user clicks on it.
		
		
			The resulting
			widget will look like the following.
		
		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/random10.png" scale="60" />
				</imageobject>
				<textobject>
					<phrase>Screenshot of the final Widget of this tutorial</phrase>
				</textobject>
			</mediaobject>
		
	

	<section id="simplewidget2">
		<title>Create project and widget implementation
		
			Create a new Android project called
			_de.vogella.android.widget.example_
			with an activity
			in the package
			`de.vogella.android.widget.example`
			.
		
		
			Create a new file
			<filename>myshape.xml</filename>
			in the
			<filename class="directory">/res/drawable</filename>
			folder. This file defines the
			drawable used as background in the
			widget.
		
		
			<programlisting language="xml">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/first/myshape.xml" />
			</programlisting>
		
		
			Define the following
			<filename>widget_layout.xml</filename>
			file under the
			<filename class="directory">res/layout</filename>
			folder.
		
		
			<programlisting language="xml">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/first/widget_layout.xml" />
			</programlisting>
		
		
			Create a new resource file called
			<filename>widget_info.xml</filename>
			via right click on the res folder and by selecting
			<menuchoice>
				<guimenu>New</guimenu>
				<guisubmenu>Android resource file</guisubmenu>
			</menuchoice>
			.
		
		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/widgetinfo10.png"/>
				</imageobject>
				<textobject>
					<phrase>Creating the widget provider 1</phrase>
				</textobject>
			</mediaobject>
		
		
			<programlisting language="xml">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/first/widget_info.xml" />
			</programlisting>
		
		
			Create the following receiver class which is
			called during
			updates.
		
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/first/MyWidgetProvider.java" />
			</programlisting>
		
		
			Open the
			<filename>AndroidManifest.xml</filename>
			and register your widget similar to the following listing.
		
		
			<programlisting language="xml">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/first/AndroidManifest.xml" />
			</programlisting>
		
		
			This attribute specifies that the
			`AppWidgetProvider`
			accepts the
			`ACTION_APPWIDGET_UPDATE`
			broadcast and specifies the metadata for the widget.
		
	

	<section id="simplewidget3">
		<title>Validating
		
			Deploy your application on your Android device. Once your
			application
			has been deployed use the
			Android
			launcher to
			install your
			new widget on the home screen and test it.
		
		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/widgetinstall10.png" scale="60" />
				</imageobject>
				<textobject>
					<phrase>Installing the widget part 1</phrase>
				</textobject>
			</mediaobject>
		
		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/widgetinstall20.png" scale="60" />
				</imageobject>
				<textobject>
					<phrase>Installing the widget part 2</phrase>
				</textobject>
			</mediaobject>
		
	

<section id="exercise_preferences" role="wrapper">
	<title>Exercise: Preference setting for the RSSfeed
	<section id="exercise_preferences_target">
		<title>Target of this exercise
		In this exercise you allow the user to enter his preferred URL for an RSS feed via another activity. This
			activity uses a preference xml file to define the user interface. 
	
	<section id="exercise_preferences_1">
		<title>Create preference file
		
			If you project does not have an
			_/app/res/xml_
			folder create one.
		
		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/preferences_createxmlfolder10.png"/>
				</imageobject>
				<textobject>
					<phrase>Creating a xml folder</phrase>
				</textobject>
			</mediaobject>
		

		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/preferences_createxmlfolder20.png"/>
				</imageobject>
				<textobject>
					<phrase>Creating a xml folder</phrase>
				</textobject>
			</mediaobject>
		


		
			Create
			an Android XML resource called
			_mypreferences.xml_
			in the xml folder.
		


		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/preferences_createxmlfolder30.png"/>
				</imageobject>
				<textobject>
					<phrase>Creating a preference resource file</phrase>
				</textobject>
			</mediaobject>
		

		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/preferences_createxmlfolder40.png"/>
				</imageobject>
				<textobject>
					<phrase>Creating a preference resource file</phrase>
				</textobject>
			</mediaobject>
		

		Add entries to this file similar to the following listing. 
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/preferences/mypreferences.xml" />
			</programlisting>
		
	

	<section id="exercise_preferences_2">
		<title>Create settings activity
		
			Create the class
			`SettingsActivity`
			which extends
			`PreferenceActivity`
			. This
			activity
			loads the
			preference
			file and allows the user to change
			the values.
		

		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
					href="./examples/preferences/SettingsActivity.java" />
			</programlisting>
		

		
			Register this class as an activity in your
			_AndroidManifest.xml_
			file.
		
	

	<section id="exercise_preferences_4">
		<title>Connect your settings activity

		
			Open the preference
			activity via the
			`onOptionsItemSelected()`
			method as demonstrated in the following listing.
		
		
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
					href="./examples/preferences/OverviewActivity2.java" />
			</programlisting>
		
	
	<section id="exercise_preferences_5">
		<title>Use the preference value to load the RSS feed
		
			To make use of our new preference activity and the preference
			values
			we adjust the
			`MyListFragment`
			class. The following code snippet
			demonstrates how you can access the
			preference value in a method which triggers an
			`AsyncTask`
			to load the feed from the Internet.
		

		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
					href="./examples/preferences/UpdateListContent.java" />
			</programlisting>
		


	
	<section id="exercise_preferences_result">
		<title>Validating
		
			Run your application. Select from your action bar the
			<guilabel>Settings</guilabel>
			action.
			You should be able to enter a URL. If you press the back
			button and press the refresh button, ensure that the
			value of the url
			preference is used in your activity.
		

	
	<section id="exercise_preferences_3">
		<title>Optional: Show the current value in the settings
		The following code snippet demonstrates how to show the current
			value in the preference screen.
		
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
					href="./examples/preferences/SettingsActivity2.java" />
			</programlisting>
		
		
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/rsspreferencewithvalue10.png"/>
				</imageobject>
				<textobject>
					<phrase>Showing the current value in the preferences</phrase>
				</textobject>
			</mediaobject>
		

	


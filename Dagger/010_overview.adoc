[[dagger2]]
== Dependency injection with Dagger 2

=== What is Dagger 2?
(((Dependency injection, Dagger 2)))
(((Dagger)))
		
Dagger 2 is dependency injection framework which uses code generation to create the code necessary for dependency injection. 
This code is very similar to hand written code, which makes the code relatively easy to read and debug.
		
Dagger 2 is based on JSR 330.
It uses the `@Inject` annotation to express a dependency (a constructor, a field, or a method).
In Dagger it is not allowed use use private fields for  field injection as Dagger 2 uses generated code to access the fields and not reflection.
		
=== Defining the dependency injection context
		
The term _dependency injection context_ is typically used to describe the set of objects which can be injected.
In Dagger class annotated with `@Module` are responsible for that.
		
Such classes can define methods annotated with `@Provides` which can return created objects. 
A model can provide several dependencies, i.e., methods annotated with `@Provides`.
		
Methods annotated with `@Provides` can also express dependencies via method parameters. 
These dependencies are fulfilled by Dagger 2.
You can use the `@Singleton ` annotation to indicate that there should be only one instance of the object. 
=== Wiring up the consumer and provider via the @Component annotation 
		
The `@Component` is used on an interface.
Such an interface is used by Dagger 2 to generate code, the base pattern is that is adds the `Dagger` prefix to the interface name. 
This generate class has a `create` method which allows configuring the objects based on the given configuration. 
The methods defined on the interface are available to access the generated objects.
	
A `@Component` interface defines the connection between provider of objects (modules) and the objects which expresses a dependency.
The following table gives an overview of the usage of the Dagger annotations.

.Table Annotation summary of Dagger 2
|===
|Annotation |Usage

|`@Module`
|Used on classes which contains methods annotated with `@Provides`.

|`@Provides`
|Can be used on methods in classes annotated with `@Module` and is used for methods which provides objects for dependencies injection.

|`@Singleton`
| Single instance of this provided object is created and shared.

| `@Component`
| Used on an interface. 
This interface is used by Dagger 2 to generate code which uses the modules to fulfill the requested dependencies.
|===

=== Using Dagger 2 with Eclipse and Maven

To use Eclipse and Maven together with Dagger 2 you can install the Maven tooling and the apt plug-in which allows Maven to configure the annotation processors. 
For Eclipse Maven support use the update site of your release and afterwards install the m2e-apt tooling via the
http://download.jboss.org/jbosstools/updates/m2e-extensions/m2e-apt update site.
		
After the installation you can turn apt-processing on via the Eclipse preferences.

image::mavenaptprocessing.png[Maven apt processing configuration]
		

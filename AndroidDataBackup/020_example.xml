<section id="exercise_databackup">
	<title>Exercise: Implementing a data backup of application settings
	
	<section id="exercise_databackup1">
		<title>Project implementation
		
			The following application uses the
			`com.vogella.android.databackup`
			top level package. This package was registered with the Google
			service.
		
		
			The backup agenda and the registration key is entered in the
			<filename>AndroidManifest.xml</filename>
			file as in the following listing.
		
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/backup/AndroidManifest.xml" />
			</programlisting>
		
		The corresponding backup agent can be implemented as
			demonstrated
			in the following listing.
		
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/backup/MyBackupAgent.java" />
			</programlisting>
		
	
	<section id="exercise_databackup2">
		<title>Trigger backup and restore
		The implemented backup manager works automatically without user
			interaction and saves and restores the registered shared preferences
			associated with the user.
			Simply change and save shared preferences
			under the file name which
			you registered your application with.
		
		
			If you want to test the save and restore operation via the adb
			shell command you can use the following commands.
		
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/backup/backuptest.txt" />
			</programlisting>
		


	

